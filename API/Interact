--[[
	Interact API in ComputerCraft
	by Creator
	Complete rewrite in OOP
]]--


local textutilsserialize = textutils.serialize
local textutilsunserialize = textutils.unserialize

--Class Layout--
local Layout = {}

--Layout initialization function--
Layout.new = function()
	local self = {}
	setmetatable(self,{__index = Layout})
	self.Button = {}
	return self
end

--Add element function--
Layout.addButton = function(self,_elementData)
	local _name = _elementData.name
	self.Button[#self.Button + 1] 
	= _elementData
end

--Class Button--
local Button = {}

--Button initialization function
Button.new = function(_name,_label,_xPos,_yPos,_xLength,_yLength,_fgColor,_bgColor,_returnValue)
	local self = {}
	setmetatable(self,{__index = Button})
	self.name = _name
	self.label = _label
	self.xPos = _xPos
	self.yPos = _yPos
	self.fgColor = _fgColor
	self.bgColor = _bgColor
	self.xLength = _xLength
	self.yLength = _yLength
	self.returnValue = _returnValue
	return self
end

--Draw function
Button.draw = function(self)
	local newText = string.sub(self.label,1,self.xLength)
	paintutils.drawFilledBox(self.xPos,self.yPos,self.xPos+self.xLength-1,self.yPos+self.yLength-1,self.bgColor)
	term.setTextColor(self.fgColor)
	term.setCursorPos(self.xPos+math.floor((self.xLength-#newText)/2),self.yPos+(self.yLength/2))
	term.write(self.label)
end

Button.returnData = function(self)
	local toReturn = {}
	for i,v in pairs(self) do
		toReturn[i] = v
	end
	return toReturn
end
--End of Button class--

--Load Function--

function Initialize()
	local toReturn = {}
	toReturn.Button = Button
	toReturn.Layout = Layout
	return toReturn
end