--[[
	Filesystem
	explorer
	by Creator
]]--

local filesystem = {}

local function readFile(path)
	local file = fs.open(path,"r")
	local variable = file.readAll()
	file.close()
	return variable
end

local function explore(dir)
	local buffer = {}
	local sBuffer = fs.list(dir)
	for i,v in pairs(sBuffer) do
		sleep(0.05)
		if fs.isDir(dir.."/"..v) then
			if v ~= ".git" then
				buffer[v] = explore(dir.."/"..v)
			end
		else
			--buffer[v] = readFile(dir.."/"..v)
			buffer[v] = "file"
		end
	end
	return buffer
end

local filesystem = explore("TheOS")
local file = fs.open("TheOS/Filesystem/Filesystem","w")
file.write(textutils.serialize(filesystem))
file.close()