--Variables--
local currWindow = 1
local Settings = {}
local Shortcuts = {}
local textutilsserialize = textutils.serialize
local textutilsunserialize = textutils.unserialize
term.redirect(term.native())

--Functions--
local function loadShortcut(x)
	m = fs.open("TheOS/Desktop/"..tostring(x)..".shortcuts","r")
	Shortcuts = textutilsunserialize(m.readAll())
	m.close()
end


--Code--

--Load Settings
n = fs.open("TheOS/Desktop/Settings","r")
Settings = textutilsunserialize(n.readAll())
n.close()

if fs.exists("TheOS/Desktop/Settings") then
	term.setCursorPos(1,1)
	print("Victory")
	os.pullEvent()
else
	term.setCursorPos(1,1)
	print("boo")
	os.pullEvent()
end

--Load Shortcuts--
loadShortcut(currWindow)
term.setCursorPos(1,1)
print(textutilsserialize(Shortcuts))
os.pullEvent()

term.setCursorPos(1,1)
print(textutilsserialize(Settings))
os.pullEvent()

term.setBackgroundColor(Settings[1])
term.clear()