--Variables--
args = {...}
local currWindow = 1
local Settings = {}
local Shortcuts = {}
local textutilsserialize = textutils.serialize
local textutilsunserialize = textutils.unserialize
term.redirect(term.native())
term.setBackgroundColor(colors.black)
term.setTextColor(colors.white)
term.clear()
--Functions--
local function loadShortcut(x)
	local m = fs.open("TheOS/Desktop/"..tostring(x)..".shortcuts","r")
	Shortcuts = textutilsunserialize(m.readAll())
	m.close()
end

local function loadSettings()
	local n = fs.open("TheOS/Desktop/Settings","r")
	Settings = textutilsunserialize(n.readAll())
	n.close()
end


local function drawShortcuts(t)
	for i,v in pairs(t) do
		local xPos = (v[1]-1)*9+2 
		local yPos = (v[2]-1)*7+2
		local image = {}
		local f = fs.open(v[3]..".ico","r")
		image = textutilsunserialize(f.readAll())
		f.close()
		paint.advancedPaint(xPos,yPos,image[1],"madafaka %<newline>% ddhasdj")
	end
end

--Code--
--Load Settings
loadSettings()

--Load Shortcuts--
loadShortcut(currWindow)

--Code--
test = GUI.newButton("hi","man",4,7,5,5,colors.red,colors.green,"test")
--test.GUI:draw()
print(textutilsserialize(test))
print(textutilsserialize(getmetatable(test)))